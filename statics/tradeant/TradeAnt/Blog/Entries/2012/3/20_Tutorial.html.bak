<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    
    <meta name="Generator" content="iWeb 3.0.4" />
    <meta name="iWeb-Build" content="local-build-20120320" />
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
    <meta name="viewport" content="width=1000" />
    <title>TradeAnt Usage</title>
    <link rel="stylesheet" type="text/css" media="screen,print" href="20_Tutorial_files/20_Tutorial.css" />
    <!--[if lt IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='20_Tutorial_files/20_TutorialIE.css'/><![endif]-->
    <!--[if gte IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='../../../../Media/IE8.css'/><![endif]-->
    <script language="javascript" type="text/javascript"><!--

iWebBlogMainPageName = 'Blog.html';
iWebBlogMainPageTitle = 'Blog';
iWebBlogArchivePageName = 'Archive.html';
iWebBlogArchivePageTitle = 'Archive';


--></script>
    <script type="text/javascript" src="../../../../Scripts/iWebSite.js"></script>
    <script type="text/javascript" src="../../../../Scripts/Widgets/SharedResources/WidgetCommon.js"></script>
    <script type="text/javascript" src="../../../../Scripts/Widgets/Navbar/navbar.js"></script>
    <script type="text/javascript" src="http://www.me.com/1/up/comments/scripts/search.js"></script>
    <script type="text/javascript" src="../../../../Scripts/iWebBlog.js"></script>
    <script type="text/javascript" src="../../../../Scripts/iWebImage.js"></script>
    <script type="text/javascript" src="20_Tutorial_files/20_Tutorial.js"></script>
  </head>
  <body style="background: rgb(101, 101, 101); margin: 0pt; " onload="onPageLoad();" onunload="onPageUnload();">
    <div style="text-align: center; ">
      <div style="margin-bottom: 10px; margin-left: auto; margin-right: auto; margin-top: 10px; overflow: hidden; position: relative; word-wrap: break-word;  background: rgb(255, 255, 255); text-align: left; width: 1000px; " id="body_content">
        <div style="margin-left: 0px; position: relative; width: 1000px; z-index: 0; " id="nav_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div class="com-apple-iweb-widget-navbar flowDefining" id="widget0" style="margin-left: 20px; margin-top: 0px; opacity: 1.00; position: relative; width: 660px; z-index: 1; ">
    
            <div id="widget0-navbar" class="navbar">

      
              <div id="widget0-bg" class="navbar-bg">

        
                <ul id="widget0-navbar-list" class="navbar-list">
 <li></li> 
</ul>
                
      
</div>
              
    
</div>
          </div>
          <script type="text/javascript"><!--//--><![CDATA[//><!--
new NavBar('widget0', '../../../../Scripts/Widgets/Navbar', '../../../../Scripts/Widgets/SharedResources', '../../../..', {"path-to-root": "..\/..\/..\/..\/", "navbar-css": ".navbar {\n\tfont-family: 'Helvetica Neue', Arial, sans-serif;\n\tfont-size: .8em;\n\tcolor: #666666;\n\tline-height: 30px;\n\tborder-bottom: 3px solid #ccc;\n}\n\n.navbar-bg {\n\ttext-align: right;}\n\n.navbar-bg ul {\n\tlist-style: none;\n\tmargin: 0px;\n\tpadding: 0px;\n}\n\n\nli {\n\tlist-style-type: none;\n\tdisplay: inline;\n\tpadding: 0px 5px 0px 0px;\n}\n\n\nli a {\n\ttext-decoration: none;\n\tpadding: 10px;\n\tcolor: #666666;\n\tfont-weight: bold;\n}\n\nli a:visited {\n\ttext-decoration: none;\n\tpadding: 10px;\n\tcolor: #666666;\n\tfont-weight: bold;\n}\n\nli a:hover\r{\r\n \tcolor: #999999;\n\ttext-decoration: none;\r}\n\n\nli.current-page a\r{\r\t color: #66ABC5;\n\ttext-decoration: none;\r}\n", "current-page-GUID": "DED010D7-602B-4E8C-BD03-28CC8A8489A6", "isCollectionPage": "YES"});
//--><!]]></script>
          <div style="clear: both; height: 0px; line-height: 0px; " class="spacer"> </div>
        </div>
        <div style="height: 75px; margin-left: 0px; position: relative; width: 1000px; z-index: 10; " id="header_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id1" style="visibility: hidden;  height: 43px; left: 20px; position: absolute; top: 17px; width: 515px; z-index: 1; " class="style_SkipStroke shape-with-text">
            <div class="text-content Normal_External_515_43" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Header">TradeAnt Usage</p>
              </div>
            </div>
            <div id="generic-header-attribute" class="Header"></div>
          </div>
          


          <div id="id2" style="height: 43px; left: 535px; position: absolute; top: 17px; width: 145px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content style_External_145_43" style="padding: 0px; ">
              <div class="style">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Heading_1">2012</p>
              </div>
            </div>
          </div>
        </div>
        <div style="margin-left: 0px; position: relative; width: 1000px; z-index: 5; " id="body_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div style="height: 1px; line-height: 1px; " class="tinyText"> </div>
          <div style="visibility: hidden;  margin-left: 20px; margin-top: 289px; position: relative; width: 846px; z-index: 1; " class="style_SkipStroke_2 shape-with-text flowDefining">
            <div class="text-content style_External_846_2318" style="padding: 0px; ">
              <div class="style_1">
                <p style="padding-top: 0pt; " class="paragraph_style">The actual code is surprisingly less than 20 lines! It prices an autocallable (no Down In Put) which pays a (annualized) coupon of 20% if index is above 120 for times 1.75,2.0,2.25,2.5,2.75,3.0 years.<br /></p>
                <p class="paragraph_style_1"><br /></p>
                <p class="paragraph_style_1">#include &lt;stdio.h&gt;<br /></p>
                <p class="paragraph_style_1">#include &lt;tradeant/blackscholes1d.h&gt;<br /></p>
                <p class="paragraph_style_1">//sample templates<br /></p>
                <p class="paragraph_style_1">double downinput(double spot,double timeremaining)<br /></p>
                <p class="paragraph_style_1">{<br /></p>
                <p class="paragraph_style_1">    double payoff = 0.0;<br /></p>
                <p class="paragraph_style_1">    if(spot &lt;= 60 &amp;&amp; timeremaining == 0.0) payoff = -1*(100 - spot);<br /></p>
                <p class="paragraph_style_1">    return payoff;<br /></p>
                <p class="paragraph_style_1">}<br /></p>
                <p class="paragraph_style_1">double digital_cashflow(double spot,double timeremaining)<br /></p>
                <p class="paragraph_style_1">{<br /></p>
                <p class="paragraph_style_1">    double a;<br /></p>
                <p class="paragraph_style_1">    if(spot &lt; 90 &amp;&amp; timeremaining == 0.0) return 13;<br /></p>
                <p class="paragraph_style_1">    else return 0.0;<br /></p>
                <p class="paragraph_style_1">}<br /></p>
                <p class="paragraph_style_1"><br /></p>
                <p class="paragraph_style_1">double digital2_cashflow(double spot,double timeremaining)<br /></p>
                <p class="paragraph_style_1">{<br /></p>
                <p class="paragraph_style_1">    //return 1;<br /></p>
                <p class="paragraph_style_1">    double a;<br /></p>
                <p class="paragraph_style_1">    if(spot &gt;= 100.0 &amp;&amp; timeremaining == 0.0)<br /></p>
                <p class="paragraph_style_1">        return 13;<br /></p>
                <p class="paragraph_style_1">    else return 0.0;<br /></p>
                <p class="paragraph_style_1">}<br /></p>
                <p class="paragraph_style_2"><br /></p>
                <p class="paragraph_style">int main()<br />{<br /></p>
                <p class="paragraph_style"><br />//First of all set a reference time from which all times will be calculated. Generally it is today but here you can set it to anything...<br />  //can be today or any other date - format is year,month,day<br />  setreftime(2012,Jan,1);<br /><br />  //Volatility Surface<br />  volsurface v;<br />  initialize_volsurface(&amp;v);<br /><br />  v.scale = 0.01;<br />  v.set_size(&amp;v,21,14);<br />  v.fetch_volatility_surface(&amp;v,&quot;volsurface.csv&quot;);<br /><br /><br />  //Interest Rate Curve<br />  rates r;<br />  initialize_rates(&amp;r);<br />  r.set_constant_rate(&amp;r,0.0);<br /><br />  //Dividend Curve<br />  rates divs;<br />  initialize_rates(&amp;divs);<br />  divs.set_constant_rate(&amp;divs,0.0);<br /><br />  blackscholes1d digital;<br />  initialize_blackscholes1d(&amp;digital);<br /><br />  digital.set_model_parameters(&amp;digital,0.005,1.25,1,200);<br />  digital.set_vol_surface(&amp;digital,v);<br />  digital.set_rates(&amp;digital,r,divs);<br /><br /><br />  digital.apply_cashflow = digital_cashflow;<br />  results digitalcalloutput = digital.solve(&amp;digital);<br /><br />  digital.apply_cashflow = digital2_cashflow;<br />  results digitalputoutput = digital.solve(&amp;digital);<br /><br /><br />int i=0,j=0;<br /><br />printf(&quot;\n*************Digital Call Prices***********\n&quot;);<br />j=digital.nts-1;<br />{<br />  for(i=0;i&lt;digital.numberofsteps;i++)<br />  {<br />        printf(&quot;%.2f\t&quot;,digitalcalloutput.prices[i][j]);<br />  }<br />        printf(&quot;\n&quot;);<br />}<br />j=0;<br />printf(&quot;\n*************Digital Call Deltas***********\n&quot;);<br />j=digital.nts-1;<br />{<br />  for(i=0;i&lt;digital.numberofsteps;i++)<br />  {<br />        printf(&quot;%.2f\t&quot;,digitalcalloutput.delta[i][j]);<br />  }<br />        printf(&quot;\n&quot;);<br />}<br />j=0;<br />printf(&quot;\n*************Digital Call Gammas***********\n&quot;);<br />j=digital.nts-1;<br />{<br />  for(i=0;i&lt;digital.numberofsteps;i++)<br />  {<br />        printf(&quot;%.2f\t&quot;,digitalcalloutput.gamma[i][j]);<br />  }<br />        printf(&quot;\n&quot;);<br />}<br /><br /></p>
                <p class="paragraph_style">}<br /></p>
                <p class="paragraph_style"><br /></p>
                <p class="paragraph_style">Apart form this it contains 2d Partial Differential equation for solving 2 asset baskets which will cover exotics such as max of call, best of call and anything you name. Also it contains hedging using market instruments. Some portions might be buggy, coz I can't test everything....so....looking for developers who know C and can pick up the design. If interested do mail me.... <br /></p>
                <p class="paragraph_style_1">So the same framework can be used to price almost any exotic, autocallable , range accrual, knockouts...you name it...just point to the cashflow!<br /></p>
                <p class="paragraph_style"><br /></p>
                <p class="paragraph_style_2"><br /></p>
                <p class="paragraph_style_2"><br /></p>
              </div>
              <div style="height: 22px; line-height: 22px; " class="tinyText"> </div>
            </div>
            <div id="generic-body-attributes" class="Free_Form"></div>
          </div>
          


          <div id="id3" style="visibility: hidden;  height: 20px; left: 20px; position: absolute; top: 262px; width: 295px; z-index: 1; " class="style_SkipStroke_3 shape-with-text">
            <div class="text-content style_External_295_20" style="padding: 0px; ">
              <div class="style_2">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Summary_Title">Tutorial</p>
              </div>
            </div>
            <div id="generic-title-attributes" class="Summary_Title"></div>
          </div>
          


          <div id="id4" style="visibility: hidden;  height: 20px; left: 315px; position: absolute; top: 262px; width: 104px; z-index: 1; " class="style_SkipStroke_4 shape-with-text">
            <div class="text-content style_External_104_20" style="padding: 0px; ">
              <div class="style_2">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Date">3/20/12</p>
              </div>
            </div>
            <div id="generic-datefield-attributes" class="Date"></div>
          </div>
          


          <div id="id5" style="height: 290px; left: 380px; position: absolute; top: -19px; width: 492px; z-index: 1; " class="style_SkipStroke_5 shape-with-text shadow_0">
            <div class="text-content style_External_492_290" style="padding: 0px; ">
              <div class="style_3">
                <p style="padding-top: 0pt; " class="paragraph_style_3">Algorithm in my mind<br /></p>
                <p class="paragraph_style_4">1.     Load the volatility surface<br /></p>
                <p class="paragraph_style_4">2.     Initialize the model<br /></p>
                <p class="paragraph_style_4">3.     Create cash flows at specific times<br /></p>
                <p class="paragraph_style_4">4.     Apply the cash flows to the model<br /></p>
                <p class="paragraph_style_4">5.     Apply vol surface to the model<br /></p>
                <p class="paragraph_style_4">6.     Retrieve price and Greeks in a bundle<br /></p>
                <p class="paragraph_style_5"><br /></p>
              </div>
            </div>
          </div>
          


          <div style="height: 257px; width: 367px;  height: 257px; left: 8px; position: absolute; top: -3px; width: 367px; z-index: 1; " class="tinyText style_SkipStroke_6 shadow_1" id="id6">
            <img src="20_Tutorial_files/background.jpg" alt="" style="border: none; height: 257px; width: 368px; " />
          </div>
          <div style="height: 0px; line-height: 0px; " class="spacer"> </div>
        </div>
        <div style="height: 100px; margin-left: 0px; position: relative; width: 1000px; z-index: 15; " id="footer_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id7" style="height: 24px; left: 220px; position: absolute; top: 9px; width: 200px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_200_24" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Next"><a class="iWebBlogNext class1" title="" href=""><span class="style_4">Next &gt;</span></a></p>
              </div>
            </div>
          </div>
          


          <div id="id8" style="height: 24px; left: 20px; position: absolute; top: 9px; width: 195px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_195_24" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Previous"><a class="iWebBlogPrev class2" title="" href=""><span class="style_4">&lt; Previous</span></a></p>
              </div>
            </div>
          </div>
          <a href="http://apple.com/mac" title="http://apple.com/mac"><img src="20_Tutorial_files/mwmac.png" alt="Made on a Mac" style="border: none; height: 50px; left: 280px; opacity: 0.35; position: absolute; top: 38px; width: 139px; z-index: 1; " id="id9" />

</a>
        </div>
      </div>
    </div>
  </body>
</html>


